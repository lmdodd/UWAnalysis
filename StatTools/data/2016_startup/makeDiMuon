#!/bin/sh
#preselection='LLpt_1>19&&LLpt_2>20&&npv>0&&diLeptons==0&&iso_1<0.1&&tauIsoMedium>0.5&&tightMuons<=1&&tightElectrons==0&&againstMuonTight3_2>0&&againstElectronVLooseMVA6_2>0&&tauDecayMode!=5&&tauDecayMode!=6'
preselection='LLpt_1>24&&LLpt_2>24&&npv>0&&diLeptons==1&&iso_1<0.1&&tightMuons<=2&&tightElectrons==0'
bselection='nbtag>=1'
antibselection='nbtag==0'
wselection='mt_1>70'
signalselection='mt_1<40'
qcdselection=$inclselection
trigselection='LLpt_1>24' #only for MC
trigselectiondata='LLpt_1>24&&HLT_IsoMu22_v_fired>0&&HLT_IsoMu22_v_prescale==1' #only for Data
relaxedSelection='LLpt_1>24&&LLpt_2>20&&npv>0&&diLeptons==0&&iso_1<0.1&&tauIsoMedium>0.5'
luminosity=589. #pb
#luminosity=2246. #pb
direc='/nfs_scratch/laura/80X_ztt_weighted1/'
datadirec=$direc
zttScale=1.
topWeight=1.0
qcdfactor=1.17
topSF=1.
bins=30

binning='binningLowStat=20.,30.,40.,45.,50.,55.,60.,65.,70.,75.,80.,85.,90.,95.,100.,110.,120.,130.,150. binningHighStat=0.,20.,40.,60.,80.,100.,120.,140.,160.,180.,200.,250.,300.,350.' 
mkdir diMuonMC


#LLmass
MakeDataCardHTT_2016_MC channel='muTau'  dataFile=$datadirec'muDATA.root' qcdFile=$direc'muDATA.root' zttFile=$direc'ZJETS.root' zllFile=$direc'ZJETS.root' wFile=$direc'WJets_amc.root' vvFile=$direc'DiBoson.root' topFile=$direc'TT.root' preselection=$preselection  wselection=$wselection bselection=$bselection antibselection=$antibselection relaxedSelection=$relaxedSelection trigselection=$trigselection trigselection50ns=$trigselectiondata  signalselection=$signalselection   qcdselection=$qcdselection luminosityErr=0.045 qcdfactor=$qcdfactor qcdfactorErr=0.02 vvErr=0.3   zttScale=$zttScale zttScaleErr=0.033    wFactorErr=0.06    zjfterr=0.1  zlfterr=0.24   topErr=0.075  topSF=$topSF 	muID=1.00 muIDErr=0.01 eleID=0.0 eleIDErr=0.0 tauID=1.0 tauIDErr=0.06  dir=$direc''  bID=1.0  bIDErr=0.10  bMisID=1.0  bMisIDErr=0.17    bitmask=1,0,0,0 TTweight=$topWeight weight='__WEIGHT__*GENWEIGHT*puweight'  luminosity=$luminosity  variable='LLmass' bins=15 min=0 max=150 outputFile='diMuonMC/muTau_LLmass.root' 

#LLpt_2
MakeDataCardHTT_2016_MC channel='muTau' dataFile=$datadirec'muDATA.root' qcdFile=$direc'muDATA.root' zttFile=$direc'ZJETS.root' zllFile=$direc'ZJETS.root' wFile=$direc'WJets_amc.root' vvFile=$direc'DiBoson.root' topFile=$direc'TT.root' preselection=$preselection  wselection=$wselection bselection=$bselection antibselection=$antibselection relaxedSelection=$relaxedSelection trigselection=$trigselection trigselection50ns=$trigselectiondata  signalselection=$signalselection   qcdselection=$qcdselection luminosityErr=0.045 qcdfactor=$qcdfactor qcdfactorErr=0.02 vvErr=0.3   zttScale=$zttScale zttScaleErr=0.033    wFactorErr=0.06    zjfterr=0.1  zlfterr=0.24   topErr=0.075  topSF=$topSF 	muID=1.00 muIDErr=0.01 eleID=0.0 eleIDErr=0.0 tauID=1.0 tauIDErr=0.06  dir=$direc''  bID=1.0  bIDErr=0.10  bMisID=1.0  bMisIDErr=0.17    bitmask=1,0,0,0 TTweight=$topWeight weight='__WEIGHT__*GENWEIGHT*puweight'  luminosity=$luminosity  variable='LLpt_2' bins=40 min=0 max=80 outputFile='diMuonMC/muTau_LLpt_2.root' 

#LLpt_1
MakeDataCardHTT_2016_MC channel='muTau' dataFile=$datadirec'muDATA.root' qcdFile=$direc'muDATA.root' zttFile=$direc'ZJETS.root' zllFile=$direc'ZJETS.root' wFile=$direc'WJets_amc.root' vvFile=$direc'DiBoson.root' topFile=$direc'TT.root' preselection=$preselection  wselection=$wselection bselection=$bselection antibselection=$antibselection relaxedSelection=$relaxedSelection trigselection=$trigselection trigselection50ns=$trigselectiondata  signalselection=$signalselection   qcdselection=$qcdselection luminosityErr=0.045 qcdfactor=$qcdfactor qcdfactorErr=0.02 vvErr=0.3   zttScale=$zttScale zttScaleErr=0.033    wFactorErr=0.06    zjfterr=0.1  zlfterr=0.24   topErr=0.075  topSF=$topSF 	muID=1.00 muIDErr=0.01 eleID=0.0 eleIDErr=0.0 tauID=1.0 tauIDErr=0.06  dir=$direc''  bID=1.0  bIDErr=0.10  bMisID=1.0  bMisIDErr=0.17    bitmask=1,0,0,0 TTweight=$topWeight weight='__WEIGHT__*GENWEIGHT*puweight'  luminosity=$luminosity  variable='LLpt_1' bins=25 min=0 max=100 outputFile='diMuonMC/muTau_LLpt_1.root' 

#LLeta_1
MakeDataCardHTT_2016_MC channel='muTau' dataFile=$datadirec'muDATA.root' qcdFile=$direc'muDATA.root' zttFile=$direc'ZJETS.root' zllFile=$direc'ZJETS.root' wFile=$direc'WJets_amc.root' vvFile=$direc'DiBoson.root' topFile=$direc'TT.root' preselection=$preselection  wselection=$wselection bselection=$bselection antibselection=$antibselection relaxedSelection=$relaxedSelection trigselection=$trigselection trigselection50ns=$trigselectiondata  signalselection=$signalselection   qcdselection=$qcdselection luminosityErr=0.045 qcdfactor=$qcdfactor qcdfactorErr=0.02 vvErr=0.3   zttScale=$zttScale zttScaleErr=0.033    wFactorErr=0.06    zjfterr=0.1  zlfterr=0.24   topErr=0.075  topSF=$topSF 	muID=1.00 muIDErr=0.01 eleID=0.0 eleIDErr=0.0 tauID=1.0 tauIDErr=0.06  dir=$direc''  bID=1.0  bIDErr=0.10  bMisID=1.0  bMisIDErr=0.17    bitmask=1,0,0,0 TTweight=$topWeight weight='__WEIGHT__*GENWEIGHT*puweight'  luminosity=$luminosity  variable='LLeta_1' bins=30 min=-3 max=3 outputFile='diMuonMC/muTau_LLeta_1.root' 

#LLeta_2
MakeDataCardHTT_2016_MC channel='muTau' dataFile=$datadirec'muDATA.root' qcdFile=$direc'muDATA.root' zttFile=$direc'ZJETS.root' zllFile=$direc'ZJETS.root' wFile=$direc'WJets_amc.root' vvFile=$direc'DiBoson.root' topFile=$direc'TT.root' preselection=$preselection  wselection=$wselection bselection=$bselection antibselection=$antibselection relaxedSelection=$relaxedSelection trigselection=$trigselection trigselection50ns=$trigselectiondata  signalselection=$signalselection   qcdselection=$qcdselection luminosityErr=0.045 qcdfactor=$qcdfactor qcdfactorErr=0.02 vvErr=0.3   zttScale=$zttScale zttScaleErr=0.033    wFactorErr=0.06    zjfterr=0.1  zlfterr=0.24   topErr=0.075  topSF=$topSF 	muID=1.00 muIDErr=0.01 eleID=0.0 eleIDErr=0.0 tauID=1.0 tauIDErr=0.06  dir=$direc''  bID=1.0  bIDErr=0.10  bMisID=1.0  bMisIDErr=0.17    bitmask=1,0,0,0 TTweight=$topWeight weight='__WEIGHT__*GENWEIGHT*puweight'  luminosity=$luminosity  variable='LLeta_2' bins=30 min=-3 max=3 outputFile='diMuonMC/muTau_LLeta_2.root' 

#LLphi_1
MakeDataCardHTT_2016_MC channel='muTau' dataFile=$datadirec'muDATA.root' qcdFile=$direc'muDATA.root' zttFile=$direc'ZJETS.root' zllFile=$direc'ZJETS.root' wFile=$direc'WJets_amc.root' vvFile=$direc'DiBoson.root' topFile=$direc'TT.root' preselection=$preselection  wselection=$wselection bselection=$bselection antibselection=$antibselection relaxedSelection=$relaxedSelection trigselection=$trigselection trigselection50ns=$trigselectiondata  signalselection=$signalselection   qcdselection=$qcdselection luminosityErr=0.045 qcdfactor=$qcdfactor qcdfactorErr=0.02 vvErr=0.3   zttScale=$zttScale zttScaleErr=0.033    wFactorErr=0.06    zjfterr=0.1  zlfterr=0.24   topErr=0.075  topSF=$topSF 	muID=1.00 muIDErr=0.01 eleID=0.0 eleIDErr=0.0 tauID=1.0 tauIDErr=0.06  dir=$direc''  bID=1.0  bIDErr=0.10  bMisID=1.0  bMisIDErr=0.17    bitmask=1,0,0,0 TTweight=$topWeight weight='__WEIGHT__*GENWEIGHT*puweight'  luminosity=$luminosity  variable='LLphi_1' bins=15 min=-3.14 max=3.14 outputFile='diMuonMC/muTau_LLphi_1.root' 

#LLphi_2
MakeDataCardHTT_2016_MC channel='muTau' dataFile=$datadirec'muDATA.root' qcdFile=$direc'muDATA.root' zttFile=$direc'ZJETS.root' zllFile=$direc'ZJETS.root' wFile=$direc'WJets_amc.root' vvFile=$direc'DiBoson.root' topFile=$direc'TT.root' preselection=$preselection  wselection=$wselection bselection=$bselection antibselection=$antibselection relaxedSelection=$relaxedSelection trigselection=$trigselection trigselection50ns=$trigselectiondata  signalselection=$signalselection   qcdselection=$qcdselection luminosityErr=0.045 qcdfactor=$qcdfactor qcdfactorErr=0.02 vvErr=0.3   zttScale=$zttScale zttScaleErr=0.033    wFactorErr=0.06    zjfterr=0.1  zlfterr=0.24   topErr=0.075  topSF=$topSF 	muID=1.00 muIDErr=0.01 eleID=0.0 eleIDErr=0.0 tauID=1.0 tauIDErr=0.06  dir=$direc''  bID=1.0  bIDErr=0.10  bMisID=1.0  bMisIDErr=0.17    bitmask=1,0,0,0 TTweight=$topWeight weight='__WEIGHT__*GENWEIGHT*puweight'  luminosity=$luminosity  variable='LLphi_2' bins=15 min=-3.14 max=3.14 outputFile='diMuonMC/muTau_LLphi_2.root' 

exit;
